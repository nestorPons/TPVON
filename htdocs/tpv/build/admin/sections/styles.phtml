<?php namespace app\controllers\components?><section id="styles">
    <h1>Configuraci√≥n de estilos</h1>
    <form id="styles_form">
        <?php new \app\core\Components('m-select', Array("id"=>"id5e3de6c81a96a_f1","value"=>$font1,"label"=>"Fuente principal","options"=>$fonts,"class"=>"valid"), );?>
        <?php new \app\core\Components('m-select', Array("id"=>"id5e3de6c81a96a_f2","value"=>$font2,"label"=>"Fuente secundaria","options"=>$fonts,"class"=>"valid"), );?>
        <?php new \app\core\Components('m-input', Array("type"=>"color","id"=>"id5e3de6c81a96a_c1","value"=>$main_color,"label"=>"Color principal"), );?>
        <?php new \app\core\Components('m-input', Array("type"=>"color","id"=>"id5e3de6c81a96a_c2","value"=>$second_color,"label"=>"Color secundario"), );?>
    </form>
    <script>
        app.styles = {
            buttons: [],
            name: 'styles',
            change: false,
            css_file: 'css/main.css',
            form: document.getElementById('styles_form'),
            font1: new MySelect("id5e3de6c81a96a_f1"),
            font2: new MySelect("id5e3de6c81a96a_f2"),
            color1: new MyInput("id5e3de6c81a96a_c1"),
            color2: new MyInput("id5e3de6c81a96a_c2"),
            load() {
                this.font1.change(_ => this.save());
                this.font2.change(_ => this.save());
                this.color1.change(_ => this.save());
                this.color2.change(_ => this.save());
            },
            exit() {
                
            },
            save() {
                app.post({
                    controller: this.name,
                    action: 'save',
                    data: {
                        'idioma': 'es',
                        'font1': this.font1.value(),
                        'font2': this.font2.value(),
                        'main-color': this.color1.value(),
                        'second-color': this.color2.value()
                    }
                }, (r, s) => {
                    if (s) {
                        let fileref = document.createElement("link");
                        fileref.setAttribute("rel", "stylesheet");
                        fileref.setAttribute("type", "text/css");
                        fileref.setAttribute("href", this.css_file);
                        document.getElementsByTagName("head")[0].appendChild(fileref);
                    }
                });
            }
        }
    </script>
</section>