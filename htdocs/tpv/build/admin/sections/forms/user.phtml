<?php namespace app\controllers\components?><? $o = ($Data['admin'])
    ? [0 => 'Cliente', 1 => 'Usuario', 2 => 'Administrador']
    : [0 => 'Cliente', 1 => 'Usuario'];
?>
<component class="editUser">
    <form controller="user" action="save" validation="app.users.validation(callback)" callback="app.users.save(data)">
        <fieldset>
            <legend></legend>
            <?php new \app\core\Components('m-input', Array("type"=>"text","label"=>"nombre","tabindex"=>"1","name"=>"nombre","required"=>"true"), );?>
            <?php new \app\core\Components('m-select', Array("label"=>"Tipo de usuario","tabindex"=>"2","name"=>"nivel","class"=>"valid","required"=>"true","options"=>$o,"selected"=>"0","option_default"=>"false"), );?>
  
            <div class="collapse">
                <input type="checkbox" id="editUser_main" aria-hidden="true">
                <label for="editUser_main" aria-hidden="true" class="collapse">
                    Datos usuario
                </label>
                    
                <div>
                    <?php new \app\core\Components('m-input', Array("type"=>"text","label"=>"Id usuario","tabindex"=>"3","name"=>"id","readonly"=>"true"), );?>
                    <?php new \app\core\Components('m-input', Array("type"=>"text","label"=>"Código","tabindex"=>"5","name"=>"codigo"), );?>
                    <?php new \app\core\Components('m-input', Array("type"=>"tel","label"=>"Teléfono","tabindex"=>"6","name"=>"tel"), );?>
                    <?php new \app\core\Components('m-input', Array("type"=>"text","label"=>"DNI","tabindex"=>"7","name"=>"dni","pattern"=>"(([X-Z]{1})([-]?)(\d{7})([-]?)([A-Z]{1}))|((\d{8})([-]?)([A-Z]{1}))","tile"=>"Introduzca el dni"), );?>
                    <?php new \app\core\Components('m-input', Array("type"=>"text","label"=>"Fecha nacimiento dd/mm/yyyy","tabindex"=>"8","name"=>"fecha_nacimiento","pattern"=>"(0[1-9]|1[0-9]|2[0-9]|3[01])/(0[1-9]|1[012])/[0-9]{4}"), );?>
                    <?php new \app\core\Components('m-input', Array("type"=>"text","label"=>"Observaciones","tabindex"=>"9","name"=>"obs"), );?>    
                </div>
                <input type="checkbox" id="editUser_second" aria-hidden="true">
                <label for="editUser_second" aria-hidden="true" class="collapse">
                    Datos cuenta
                </label>
                <div>
                    <?php new \app\core\Components('m-checkbox', Array("label"=>"Bloquear cuenta","tabindex"=>"10","name"=>"estado","default"=>"1","value"=>"2"), );?>
                    <?php new \app\core\Components('m-checkbox', Array("label"=>"Aplicar promociones","tabindex"=>"11","name"=>"promos","value"=>"1"), );?>
                    <?php new \app\core\Components('m-checkbox', Array("label"=>"Enviar emails","tabindex"=>"12","name"=>"emails","value"=>"1"), );?>
                </div>
            </div>
        </fieldset>
        <?php new \app\core\Components('m-input', Array("type"=>"hidden","name"=>"noAuth","value"=>"1"), );?>
        <?php
        $btnSave    = new ButtonSuccess(['caption' => 'Guardar', 'tabindex' => 11]);
        $btnDel     = new ButtonCancel(['caption' => 'Eliminar', 'tabindex' => 12, 'class' => 'fnDelete']);
        ?>

    </form>
</component>
<style lang="less">.editUser form{min-width:auto;padding:0;border:none}.editUser form m-input{display:block}.editUser .collapse>:checked+label+div{max-height:inherit}</style>